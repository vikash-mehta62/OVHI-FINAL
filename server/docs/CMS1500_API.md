# CMS-1500 Form Generation API Documentation\n\n## Overview\n\nThe CMS-1500 Form Generation API provides comprehensive functionality for creating compliant CMS-1500 forms from claim data. The service generates PDF forms with precise field positioning according to CMS specifications.\n\n## Base URL\n```\n/api/v1/rcm\n```\n\n## Authentication\nAll endpoints require authentication. Include the JWT token in the Authorization header:\n```\nAuthorization: Bearer <jwt_token>\n```\n\n## CMS-1500 Form Specifications\n\n### Form Requirements\n- **Form Type**: CMS-1500 (02/12) - Current version\n- **Paper Size**: 8.5\" x 11\" (Letter size)\n- **Font**: Courier (monospace) - 10pt for data fields\n- **Field Positioning**: Precise coordinates per CMS specifications\n- **Maximum Service Lines**: 6 per form\n- **Maximum Diagnosis Codes**: 12 per form\n\n### Required Data Elements\n- Patient demographics and insurance information\n- Provider information including NPI\n- Service dates and procedure codes\n- Diagnosis codes with proper pointers\n- Billing and facility information\n\n## Endpoints\n\n### 1. Generate CMS-1500 Form\n\nGenerate a PDF CMS-1500 form for a specific claim.\n\n**Endpoint:** `GET /claims/{claimId}/cms1500/generate`\n\n**Path Parameters:**\n- `claimId` (integer, required) - Claim ID\n\n**Query Parameters:**\n- `format` (string, optional, default: 'pdf') - Output format (currently only PDF supported)\n- `includeFormBackground` (boolean, optional, default: true) - Include form background and labels\n- `isDraft` (boolean, optional, default: false) - Add draft watermark\n\n**Response:**\n- **Content-Type**: `application/pdf`\n- **Content-Disposition**: `attachment; filename=\"CMS1500-{claimId}.pdf\"`\n- **Body**: PDF binary data\n\n**Example Request:**\n```bash\ncurl -X GET \"/api/v1/rcm/claims/123/cms1500/generate?includeFormBackground=true&isDraft=false\" \\\n  -H \"Authorization: Bearer <token>\" \\\n  -o \"CMS1500-123.pdf\"\n```\n\n**Error Responses:**\n```json\n{\n  \"success\": false,\n  \"message\": \"Claim data validation failed\",\n  \"error\": {\n    \"code\": \"VALIDATION_ERROR\",\n    \"details\": {\n      \"errors\": [\n        \"Patient name is required\",\n        \"Provider NPI must be 10 digits\"\n      ]\n    }\n  }\n}\n```\n\n### 2. Preview CMS-1500 Form Data\n\nPreview form data and validation without generating the actual PDF.\n\n**Endpoint:** `GET /claims/{claimId}/cms1500/preview`\n\n**Path Parameters:**\n- `claimId` (integer, required) - Claim ID\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"message\": \"CMS-1500 form preview generated successfully\",\n  \"data\": {\n    \"claimId\": 123,\n    \"validation\": {\n      \"isValid\": true,\n      \"errors\": [],\n      \"warnings\": [\n        \"Service line 1: Diagnosis pointer recommended\"\n      ]\n    },\n    \"formData\": {\n      \"1_group_health\": \"X\",\n      \"1a_insured_id\": \"ABC123456789\",\n      \"2_patient_name\": \"DOE, JOHN M\",\n      \"3_birth_date\": \"01 15 1980\",\n      \"3_sex_male\": \"X\",\n      \"5_patient_address\": \"123 MAIN ST\",\n      \"5_patient_city\": \"ANYTOWN\",\n      \"5_patient_state\": \"CA\",\n      \"5_patient_zip\": \"90210\",\n      \"21_diagnosis_A\": \"Z00.00\",\n      \"14_date_from_1\": \"03 15 24\",\n      \"17_procedure_code_1\": \"99213\",\n      \"19_charges_1\": \"150.00\",\n      \"33a_billing_provider_npi\": \"1234567890\"\n    },\n    \"fieldCount\": 45,\n    \"estimatedSize\": \"~85KB\"\n  }\n}\n```\n\n### 3. Batch Generate CMS-1500 Forms\n\nGenerate multiple CMS-1500 forms in a single request.\n\n**Endpoint:** `POST /forms/cms1500/batch`\n\n**Request Body:**\n```json\n{\n  \"claimIds\": [123, 124, 125],\n  \"options\": {\n    \"includeFormBackground\": true,\n    \"isDraft\": false,\n    \"format\": \"pdf\"\n  }\n}\n```\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"message\": \"Batch CMS-1500 generation completed\",\n  \"data\": {\n    \"summary\": {\n      \"total\": 3,\n      \"successful\": 2,\n      \"failed\": 1,\n      \"totalSize\": 170240\n    },\n    \"results\": [\n      {\n        \"claimId\": 123,\n        \"success\": true,\n        \"size\": 85120\n      },\n      {\n        \"claimId\": 124,\n        \"success\": true,\n        \"size\": 85120\n      },\n      {\n        \"claimId\": 125,\n        \"success\": false,\n        \"error\": \"Patient name is required\"\n      }\n    ]\n  }\n}\n```\n\n### 4. Validate CMS-1500 Data\n\nValidate claim data for CMS-1500 form generation without creating the form.\n\n**Endpoint:** `GET /claims/{claimId}/cms1500/validate`\n\n**Path Parameters:**\n- `claimId` (integer, required) - Claim ID\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"message\": \"CMS-1500 validation completed\",\n  \"data\": {\n    \"claimId\": 123,\n    \"validation\": {\n      \"isValid\": false,\n      \"errors\": [\n        \"Provider NPI is required\",\n        \"At least one diagnosis code is required\"\n      ],\n      \"warnings\": [\n        \"Patient ZIP code format is invalid\"\n      ]\n    },\n    \"canGenerate\": false,\n    \"requiredFields\": 2,\n    \"warnings\": 1\n  }\n}\n```\n\n### 5. Get CMS-1500 Generation History\n\nRetrieve the history of CMS-1500 form generations for a claim.\n\n**Endpoint:** `GET /claims/{claimId}/cms1500/history`\n\n**Path Parameters:**\n- `claimId` (integer, required) - Claim ID\n\n**Query Parameters:**\n- `page` (integer, optional, default: 1) - Page number\n- `limit` (integer, optional, default: 20) - Items per page\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"message\": \"CMS-1500 generation history retrieved successfully\",\n  \"data\": {\n    \"activities\": [\n      {\n        \"id\": 1,\n        \"action_type\": \"form_generated\",\n        \"field_name\": \"cms1500_form\",\n        \"old_value\": null,\n        \"new_value\": \"generated\",\n        \"user_id\": 5,\n        \"user_name\": \"John Doe\",\n        \"timestamp\": \"2024-01-15T14:30:00Z\",\n        \"notes\": \"CMS-1500 form generated successfully\",\n        \"metadata\": {\n          \"form_type\": \"CMS-1500\",\n          \"success\": true,\n          \"options\": {\n            \"includeFormBackground\": true,\n            \"isDraft\": false\n          }\n        }\n      }\n    ],\n    \"pagination\": {\n      \"page\": 1,\n      \"limit\": 20,\n      \"total\": 5,\n      \"totalPages\": 1,\n      \"hasNext\": false,\n      \"hasPrev\": false\n    }\n  }\n}\n```\n\n## Field Mapping Reference\n\n### CMS-1500 Box Mapping\n\n| Box | Field Name | Description | Required | Max Length |\n|-----|------------|-------------|----------|------------|\n| 1 | Type of Insurance | Insurance type checkboxes | Yes | N/A |\n| 1a | Insured's ID Number | Policy/Member ID | Yes | 20 |\n| 2 | Patient's Name | Last, First MI format | Yes | 28 |\n| 3 | Patient's Birth Date | MM DD YYYY format | Yes | 10 |\n| 4 | Insured's Name | Subscriber name | No | 28 |\n| 5 | Patient's Address | Complete address | Yes | 29 |\n| 6 | Patient Relationship | Self/Spouse/Child/Other | Yes | N/A |\n| 7 | Insured's Address | If different from patient | No | 29 |\n| 11 | Insured's Policy | Group/Policy number | Yes | 29 |\n| 11a | Insured's DOB/Sex | Birth date and gender | No | 10 |\n| 12 | Patient's Signature | Signature on file | Yes | N/A |\n| 13 | Insured's Signature | Authorization signature | No | N/A |\n| 21 | Diagnosis Codes | ICD-10-CM codes (A-L) | Yes | 12 codes |\n| 24A | Service Dates | From/To dates | Yes | 8 |\n| 24B | Place of Service | POS code | Yes | 2 |\n| 24D | Procedures/Services | CPT/HCPCS codes | Yes | 6 |\n| 24E | Diagnosis Pointer | Links to Box 21 | Yes | 4 |\n| 24F | Charges | Service charges | Yes | 8 |\n| 24G | Days/Units | Service units | Yes | 3 |\n| 25 | Federal Tax ID | Provider tax ID | Yes | 15 |\n| 26 | Patient Account No | Internal account number | No | 15 |\n| 27 | Accept Assignment | Yes/No checkbox | Yes | N/A |\n| 28 | Total Charge | Sum of all charges | Yes | 8 |\n| 29 | Amount Paid | Patient payments | No | 8 |\n| 31 | Signature Date | Provider signature date | Yes | 8 |\n| 32 | Service Facility | Facility name and address | No | 25 |\n| 32a | Service Facility NPI | Facility NPI number | No | 10 |\n| 33 | Billing Provider | Provider name and address | Yes | 25 |\n| 33a | Billing Provider NPI | Provider NPI number | Yes | 10 |\n\n## Validation Rules\n\n### Required Fields Validation\n- Patient name, DOB, gender, and complete address\n- Primary insurance information\n- Provider NPI (10 digits) and tax ID\n- At least one diagnosis code (ICD-10-CM format)\n- At least one service line with valid dates, procedure codes, and charges\n\n### Format Validation\n- **Dates**: MM DD YYYY or MM DD YY format\n- **NPI Numbers**: Exactly 10 digits\n- **State Codes**: 2-letter abbreviations\n- **ZIP Codes**: 5 digits or 5+4 format\n- **Procedure Codes**: Valid CPT/HCPCS format\n- **Diagnosis Codes**: Valid ICD-10-CM format\n\n### Business Rules\n- Maximum 6 service lines per form\n- Maximum 12 diagnosis codes per form\n- Service dates must be valid and logical\n- Charges must be positive numbers\n- Units must be positive integers\n\n## Error Handling\n\n### Common Error Codes\n\n| Code | Description | Resolution |\n|------|-------------|------------|\n| `VALIDATION_ERROR` | Required field missing or invalid format | Check validation response for specific errors |\n| `CLAIM_NOT_FOUND` | Claim ID does not exist | Verify claim ID is correct |\n| `INSUFFICIENT_DATA` | Not enough data to generate form | Complete required claim information |\n| `GENERATION_FAILED` | PDF generation failed | Check server logs, retry request |\n| `BATCH_LIMIT_EXCEEDED` | Too many claims in batch request | Reduce batch size to 50 or fewer |\n\n### Error Response Format\n```json\n{\n  \"success\": false,\n  \"message\": \"Error description\",\n  \"error\": {\n    \"code\": \"ERROR_CODE\",\n    \"details\": {\n      \"field\": \"specific_field\",\n      \"value\": \"invalid_value\",\n      \"expected\": \"expected_format\"\n    }\n  }\n}\n```\n\n## Rate Limiting\n\n- **Individual form generation**: 60 requests per minute\n- **Batch generation**: 10 requests per minute\n- **Preview/validation**: 120 requests per minute\n\n## Best Practices\n\n### Form Generation\n1. **Validate first**: Always validate claim data before generating forms\n2. **Use preview**: Preview forms to check formatting before final generation\n3. **Batch processing**: Use batch generation for multiple claims\n4. **Error handling**: Implement proper error handling for validation failures\n\n### Performance Optimization\n1. **Cache validation**: Cache validation results for frequently accessed claims\n2. **Async processing**: Use background jobs for large batch operations\n3. **Compression**: Enable gzip compression for API responses\n4. **CDN**: Use CDN for serving generated PDF files\n\n### Security Considerations\n1. **Access control**: Ensure users can only access their authorized claims\n2. **Data sanitization**: Validate and sanitize all input data\n3. **Audit logging**: Log all form generation activities\n4. **Secure storage**: Store generated forms securely with proper access controls\n\n## Integration Examples\n\n### JavaScript/Node.js\n```javascript\nconst axios = require('axios');\nconst fs = require('fs');\n\n// Generate CMS-1500 form\nasync function generateCMS1500(claimId, token) {\n  try {\n    const response = await axios({\n      method: 'GET',\n      url: `/api/v1/rcm/claims/${claimId}/cms1500/generate`,\n      headers: {\n        'Authorization': `Bearer ${token}`\n      },\n      responseType: 'arraybuffer'\n    });\n    \n    // Save PDF to file\n    fs.writeFileSync(`CMS1500-${claimId}.pdf`, response.data);\n    console.log('Form generated successfully');\n  } catch (error) {\n    console.error('Generation failed:', error.response?.data);\n  }\n}\n\n// Validate before generating\nasync function validateAndGenerate(claimId, token) {\n  try {\n    // First validate\n    const validation = await axios.get(\n      `/api/v1/rcm/claims/${claimId}/cms1500/validate`,\n      { headers: { 'Authorization': `Bearer ${token}` } }\n    );\n    \n    if (validation.data.data.canGenerate) {\n      await generateCMS1500(claimId, token);\n    } else {\n      console.log('Validation errors:', validation.data.data.validation.errors);\n    }\n  } catch (error) {\n    console.error('Process failed:', error.message);\n  }\n}\n```\n\n### Python\n```python\nimport requests\n\ndef generate_cms1500(claim_id, token):\n    headers = {'Authorization': f'Bearer {token}'}\n    \n    # Validate first\n    validation_url = f'/api/v1/rcm/claims/{claim_id}/cms1500/validate'\n    validation_response = requests.get(validation_url, headers=headers)\n    \n    if validation_response.json()['data']['canGenerate']:\n        # Generate form\n        generate_url = f'/api/v1/rcm/claims/{claim_id}/cms1500/generate'\n        pdf_response = requests.get(generate_url, headers=headers)\n        \n        # Save PDF\n        with open(f'CMS1500-{claim_id}.pdf', 'wb') as f:\n            f.write(pdf_response.content)\n        \n        print('Form generated successfully')\n    else:\n        errors = validation_response.json()['data']['validation']['errors']\n        print(f'Validation errors: {errors}')\n```\n\n## Troubleshooting\n\n### Common Issues\n\n1. **\"Provider NPI is required\"**\n   - Ensure provider has valid 10-digit NPI in system\n   - Check provider assignment to claim\n\n2. **\"Patient name is required\"**\n   - Verify patient record has first and last name\n   - Check patient association with claim\n\n3. **\"Invalid diagnosis code format\"**\n   - Ensure ICD-10-CM codes are properly formatted\n   - Verify codes are current and valid\n\n4. **\"Service date is required\"**\n   - Check that all service lines have valid dates\n   - Ensure date format is correct (YYYY-MM-DD)\n\n5. **\"PDF generation failed\"**\n   - Check server resources and memory\n   - Verify PDFKit dependencies are installed\n   - Review server logs for detailed error information\n\n### Support\n\nFor technical support or questions about the CMS-1500 API:\n- Check the validation endpoint for specific error details\n- Review the preview endpoint to verify data formatting\n- Consult the generation history for previous successful attempts\n- Contact system administrators for server-related issues"